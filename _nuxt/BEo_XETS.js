import{_ as S,c as n,o as s,a,g as U,r as c,j as w,k as j,l as B,m as D,n as h,F as p,p as M,t as r,q as R,v as $,s as A,x as N,y as F}from"./BiFL3GWb.js";const O={},W={class:"flex flex-col items-center bg-[#eff4fb] h-full overflow-hidden px-[30px] pt-5 w-full"};function E(x,o){return s(),n("section",W,o[0]||(o[0]=[a("h1",{class:"text-[#64748b] text-[100px] font-black leading-tight text-center"}," Welcome to the Chat App! ",-1),a("h2",{class:"text-red-500 flex justify-center text-[80px] font-bold leading-tight text-center w-4/5"}," Select a chat from the sidebar to start your conversation. ",-1),a("h3",{class:"text-green-500 flex justify-center text-[60px] font-bold leading-tight text-center w-4/5"}," Enjoy...! ",-1)]))}const K=S(O,[["render",E]]),V={key:0,class:"chatPage"},Z={class:"messageList"},q={class:"msgOutboxContent"},z={key:0,class:"filePreview"},Y=["src"],G=["href"],H={class:"timestampOutbox"},J={class:"msgInboxContent"},Q={key:0,class:"filePreview"},X=["src"],ee=["href"],te={class:"timestampInbox"},se={key:0,class:"filePreview"},ne=["src"],ae={key:1},oe={class:"sendMsgCont"},le=["onKeydown"],ce=U({__name:"[chatId]",setup(x){const o=c(null),v=c(null);c(null);const k=w(()=>o.value?(window.URL||window.webkitURL).createObjectURL(o.value):void 0),_=j(),m=B().params.chatId,u=c(""),f=c(!1);c(!1);const g=w(()=>_.selectChatById(m)??null);function y(l){let t=new Date(l);if(isNaN(t.getTime())){const L=l.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}):(\d{2})\.(\d{3})Z$/,"$1:59.$3Z");t=new Date(L)}if(isNaN(t.getTime()))return"";t.getSeconds()>59&&t.setSeconds(59);const e=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),i=t.getDate(),d=t.toLocaleString("default",{month:"long"}),P=t.getFullYear();return`${i} ${d} ${P}-${e}`}function b(){var i;if(!u.value.trim()&&!o.value)return;const l=u.value.trim(),t=typeof window<"u"&&o.value?URL.createObjectURL(o.value):null,e=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString();_.updateChat({chatId:m,newMessages:[{id:e,content:l,file:t??void 0,fileType:((i=o.value)==null?void 0:i.type)??void 0,isInbox:!1,sentAt:new Date().toISOString()}]}),u.value="",f.value=!1,o.value=null}function C(){var l;(l=v.value)==null||l.click()}function I(l){var i;const e=((i=l.target.files)==null?void 0:i[0])??null;e&&(o.value=e)}function T(){f.value=!f.value}return(l,t)=>(s(),n("div",null,[g.value?(s(),n("div",V,[a("ul",Z,[(s(!0),n(p,null,M(g.value.messages,e=>{var i,d;return s(),n("li",{key:e.id,class:F([e.isInbox?"outbox":"inbox"])},[e.isInbox?(s(),n(p,{key:0},[t[1]||(t[1]=a("span",{class:"ownerName"},"Radu Bogdan",-1)),a("span",q,r(e.content),1),e.file?(s(),n("span",z,[(i=e.fileType)!=null&&i.startsWith("image/")?(s(),n("img",{key:0,src:e.file,alt:"Preview",class:"imagePreview"},null,8,Y)):(s(),n("a",{key:1,href:e.file,target:"_blank"},r(e.file),9,G))])):h("",!0),a("span",H,r(e.sentAt?y(e.sentAt):"Time not available"),1)],64)):(s(),n(p,{key:1},[a("span",J,r(e.content),1),e.file?(s(),n("span",Q,[(d=e.fileType)!=null&&d.startsWith("image/")?(s(),n("img",{key:0,src:e.file,alt:"Preview",class:"imagePreview"},null,8,X)):(s(),n("a",{key:1,href:e.file,target:"_blank"},r(e.file),9,ee))])):h("",!0),a("span",te,r(e.sentAt?y(e.sentAt):"Time not available"),1)],64))],2)}),128)),o.value?(s(),n("li",se,[o.value.type.startsWith("image/")?(s(),n("img",{key:0,src:k.value,alt:"File Preview",class:"imagePreview"},null,8,ne)):(s(),n("span",ae,r(o.value.name),1))])):h("",!0)]),a("div",oe,[R(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",placeholder:"Type something here...",class:"sendMsgInput",onKeydown:A(N(b,["prevent"]),["enter"])},null,40,le),[[$,u.value]]),a("button",{type:"button",class:"writeMsgButton",onClick:C},t[2]||(t[2]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"var(--Text-color)",width:"18",height:"18",viewBox:"0 0 24 24"},[a("path",{d:"M16.5 6a3 3 0 0 0-4.15 0L7 11.4a1.75 1.75 0 0 0 2.46 2.46l4.95-4.95a1.25 1.25 0 1 1 1.76 1.76l-5.65 5.66a3.75 3.75 0 1 1-5.3-5.3L11.2 5.1a5 5 0 0 1 7.08 7.07l-6.3 6.3a6.25 6.25 0 0 1-8.83-8.83l7.2-7.2a3.75 3.75 0 0 1 5.3 5.3L9.25 15.3"})],-1)])),a("input",{type:"file",class:"hidden",ref_key:"fileInputRef",ref:v,onChange:I},null,544),a("button",{type:"button",class:"emojiButton",onClick:T}," ðŸ˜Š ")])])):(s(),D(K,{key:1}))]))}});export{ce as default};
