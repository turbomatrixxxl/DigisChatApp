import{_ as I,c as a,o as n,a as s,g as j,r,j as D,k as C,l as R,m as $,n as p,p as A,F as g,q as N,t as c,s as F,v as O,x as W,y as E,z}from"./ZWIag5OR.js";const K={},V={class:"flex flex-col items-center bg-[#eff4fb] h-full overflow-hidden px-[30px] pt-5 w-full"};function Z(T,d){return n(),a("section",V,d[0]||(d[0]=[s("h1",{class:"text-[#64748b] text-[100px] font-black leading-tight text-center"}," Welcome to the Chat App! ",-1),s("h2",{class:"text-red-500 flex justify-center text-[80px] font-bold leading-tight text-center w-4/5"}," Select a chat from the sidebar to start your conversation. ",-1),s("h3",{class:"text-green-500 flex justify-center text-[60px] font-bold leading-tight text-center w-4/5"}," Enjoy...! ",-1)]))}const q=I(K,[["render",Z]]),Y={key:0,class:"mainContent"},G={key:0,class:"chatPage"},H={class:"messageList"},J={class:"msgOutboxContent"},Q={key:0,class:"filePreview"},X=["src"],ee=["href"],te={class:"timestampOutbox"},se={class:"msgInboxContent"},ne={key:0,class:"filePreview"},ae=["src"],oe=["href"],le={class:"timestampInbox"},ie={key:0,class:"filePreview"},re=["src"],ce={key:1},de={class:"sendMsgCont"},ue=["onKeydown"],fe=j({__name:"[chatId]",setup(T){var b;const d=r(!1);D(()=>{d.value=!0});const o=r(null),m=r(null);r(null);const P=C(()=>o.value?(window.URL||window.webkitURL).createObjectURL(o.value):void 0),f=R(),v=$(),w=(b=v==null?void 0:v.params)==null?void 0:b.chatId,u=r(""),_=r(!1);r(!1);const y=C(()=>(f==null?void 0:f.selectChatById(w))??null);function x(l){let t=new Date(l);if(isNaN(t.getTime())){const S=l.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}):(\d{2})\.(\d{3})Z$/,"$1:59.$3Z");t=new Date(S)}if(isNaN(t.getTime()))return"";t.getSeconds()>59&&t.setSeconds(59);const e=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),i=t.getDate(),h=t.toLocaleString("default",{month:"long"}),B=t.getFullYear();return`${i} ${h} ${B}-${e}`}function k(){var i;if(!u.value.trim()&&!o.value)return;const l=u.value.trim(),t=typeof window<"u"&&o.value?URL.createObjectURL(o.value):null,e=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString();f.updateChat({chatId:w,newMessages:[{id:e,content:l,file:t??void 0,fileType:((i=o.value)==null?void 0:i.type)??void 0,isInbox:!1,sentAt:new Date().toISOString()}]}),u.value="",_.value=!1,o.value=null}function L(){var l;(l=m.value)==null||l.click()}function M(l){var i;const e=((i=l.target.files)==null?void 0:i[0])??null;e&&(o.value=e)}function U(){_.value=!_.value}return(l,t)=>d.value?(n(),a("div",Y,[y.value?(n(),a("div",G,[s("ul",H,[(n(!0),a(g,null,N(y.value.messages,e=>{var i,h;return n(),a("li",{key:e.id,class:z([e.isInbox?"outbox":"inbox"])},[e.isInbox?(n(),a(g,{key:0},[t[1]||(t[1]=s("span",{class:"ownerName"},"Radu Bogdan",-1)),s("span",J,c(e.content),1),e.file?(n(),a("span",Q,[(i=e.fileType)!=null&&i.startsWith("image/")?(n(),a("img",{key:0,src:e.file,alt:"Preview",class:"imagePreview"},null,8,X)):(n(),a("a",{key:1,href:e.file,target:"_blank"},c(e.file),9,ee))])):p("",!0),s("span",te,c(e.sentAt?x(e.sentAt):"Time not available"),1)],64)):(n(),a(g,{key:1},[s("span",se,c(e.content),1),e.file?(n(),a("span",ne,[(h=e.fileType)!=null&&h.startsWith("image/")?(n(),a("img",{key:0,src:e.file,alt:"Preview",class:"imagePreview"},null,8,ae)):(n(),a("a",{key:1,href:e.file,target:"_blank"},c(e.file),9,oe))])):p("",!0),s("span",le,c(e.sentAt?x(e.sentAt):"Time not available"),1)],64))],2)}),128)),o.value?(n(),a("li",ie,[o.value.type.startsWith("image/")?(n(),a("img",{key:0,src:P.value,alt:"File Preview",class:"imagePreview"},null,8,re)):(n(),a("span",ce,c(o.value.name),1))])):p("",!0)]),s("div",de,[F(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",placeholder:"Type something here...",class:"sendMsgInput",onKeydown:W(E(k,["prevent"]),["enter"])},null,40,ue),[[O,u.value]]),s("button",{type:"button",class:"writeMsgButton",onClick:L},t[2]||(t[2]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"var(--Text-color)",width:"18",height:"18",viewBox:"0 0 24 24"},[s("path",{d:"M16.5 6a3 3 0 0 0-4.15 0L7 11.4a1.75 1.75 0 0 0 2.46 2.46l4.95-4.95a1.25 1.25 0 1 1 1.76 1.76l-5.65 5.66a3.75 3.75 0 1 1-5.3-5.3L11.2 5.1a5 5 0 0 1 7.08 7.07l-6.3 6.3a6.25 6.25 0 0 1-8.83-8.83l7.2-7.2a3.75 3.75 0 0 1 5.3 5.3L9.25 15.3"})],-1)])),s("input",{type:"file",class:"hidden",ref_key:"fileInputRef",ref:m,onChange:M},null,544),s("button",{type:"button",class:"emojiButton",onClick:U}," ðŸ˜Š "),s("button",{type:"button",class:"sendMsgButton",onClick:k},t[3]||(t[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"var(--Text-color)",width:"24",height:"24",viewBox:"0 0 24 24"},[s("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"})],-1)]))])])):(n(),A(q,{key:1}))])):p("",!0)}}),pe=I(fe,[["__scopeId","data-v-e399dcbd"]]);export{pe as default};
